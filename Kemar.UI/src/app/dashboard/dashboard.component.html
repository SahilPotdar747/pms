<!-- Banner -->

<!-- Dashboard -->
<div class="d-flex flex-column flex-lg-row h-lg-full">
  <!-- Vertical Navbar -->

  <!-- Main content -->
  <div class="flex-grow-1">
    <!-- Header -->

    <!-- Main -->
    <main class=" ">
      <div class="container-fluid">
        <!-- Card stats -->
        <div class="row">
          <div
            class="col-xl-3 col-sm-6 col-12"
            *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
          >
            <div class="card shadow border-0" (click)="CardClick('Project')">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <span
                      class="h6 font-semibold text-muted text-sm d-block mb-2"
                      >Project</span
                    >
                    <span class="h3 font-bold mb-0">{{ activeProject }}</span>
                  </div>
                  <div class="col-auto">
                    <div class="text-white text-lg rounded-circle">
                      <img
                        class="widthimg"
                        src="../../assets/images/project.jpg"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="col-xl-3 col-sm-6 col-12"
            *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
          >
            <div class="card shadow border-0" (click)="CardClick('Task')">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <span
                      class="h6 font-semibold text-muted text-sm d-block mb-2"
                      >New Task
                    </span>
                    <span class="h3 font-bold mb-0">{{ newTask }}</span>
                  </div>
                  <div class="col-auto">
                    <div class="text-white text-lg rounded-circle">
                      <img
                        class="widthimg"
                        src="../../assets/images/new-task.png"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="col-xl-3 col-sm-6 col-12"
            *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
          >
            <div class="card shadow border-0" (click)="CardClick('Task')">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <span
                      class="h6 font-semibold text-muted text-sm d-block mb-2"
                      >WIP Task</span
                    >
                    <span class="h3 font-bold mb-0">{{ wipTask }}</span>
                  </div>
                  <div class="col-auto">
                    <div class="text-white text-lg rounded-circle">
                      <img
                        class="widthimg"
                        src="../../assets/images/wip-task.jpg"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="col-xl-3 col-sm-6 col-12"
            *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
          >
            <div class="card shadow border-0" (click)="CardClick('TotalEmp')">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <span
                      class="h6 font-semibold text-muted text-sm d-block mb-2"
                      >Total Employee</span
                    >
                    <span class="h3 font-bold mb-0">{{ totalEmp }}</span>
                  </div>
                  <div class="col-auto">
                    <div class="text-white text-lg rounded-circle">
                      <img
                        class="empWidth"
                        src="../../assets/images/employee.jpg"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid">
        <!-- Card stats -->
        <div class="row">
          <div class="col-xl-3 col-sm-6 col-12">
            <div class="card shadow border-0" (click)="CardClick('Task')">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <span
                      class="h6 font-semibold text-muted text-sm d-block mb-2"
                      >New Task
                    </span>
                    <span class="h3 font-bold mb-0">{{ selfNewTask }}</span>
                  </div>
                  <div class="col-auto">
                    <div class="text-white text-lg rounded-circle">
                      <img
                        class="widthimg"
                        src="../../assets/images/new-task.png"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 col-12">
            <div class="card shadow border-0" (click)="CardClick('Task')">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <span
                      class="h6 font-semibold text-muted text-sm d-block mb-2"
                      >Pending Task</span
                    >
                    <span class="h3 font-bold mb-0">{{ PendingTask }}</span>
                  </div>
                  <div class="col-auto">
                    <div class="text-white text-lg rounded-circle">
                      <img
                        class="widthimg"
                        src="../../assets/images/pending-task.png"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 col-12">
            <div class="card shadow border-0" (click)="CardClick('Task')">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <span
                      class="h6 font-semibold text-muted text-sm d-block mb-2"
                      >Overdue Task</span
                    >
                    <span class="h3 font-bold mb-0">{{ OverdueTask }}</span>
                  </div>
                  <div class="col-auto">
                    <div class="text-white text-lg rounded-circle">
                      <img
                        class="widthimg"
                        src="../../assets/images/overdue-task.png"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-3 col-sm-6 col-12">
            <div class="card shadow border-0" (click)="CardClick('UnAssign')">
              <div class="card-body">
                <div class="row">
                  <div class="col">
                    <span
                      class="h6 font-semibold text-muted text-sm d-block mb-2"
                      >UnAssigned Task</span
                    >
                    <span class="h3 font-bold mb-0">{{ UnAssignTask }}</span>
                  </div>
                  <div class="col-auto">
                    <div class="text-white text-lg rounded-circle">
                      <img
                        class="widthimg1"
                        src="../../assets/images/unassigned-task.png"
                        alt=""
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<div class="row mt-3">
  <!-- <div class="col-md-12">
    <p-chart type="bar" [data]="testData" [options]="basicOptions"></p-chart>
  </div> -->
  <!-- <app-chart></app-chart> -->
  <div
    class="col-md-8 col-sm-12"
    *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
  >
    <div class="card h-100">
      <div class="card-body">
        <h2 class="title1 fs-5 mb-3">Task Summary</h2>
        <p-chart
          type="bar"
          [data]="departmentStatusChart"
          [options]="departmentOptions"
          style="background-color: #333"
        ></p-chart>
      </div>
    </div>
  </div>
  <div class="col-md-4 col-sm-12">
    <div class="card h-100">
      <div class="card-body ">
        <h2 class="title1 text-dark fs-5 mb-3">Updates</h2>
        <!-- <p-chart type="bar" [data]="departmentStatusChart" ></p-chart> -->
        <div class="row" id="depList" *ngIf="IsMyTeam">
          <div
            class="col-md-6"
            *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
          >
            <p-dropdown
              [options]="deptMaster"
              id="assignedById"
              [(ngModel)]="departmentIdForPieChart"
              (change)="getAllAssignToUsers(departmentIdForPieChart)"
              optionLabel="departmentName"
              optionValue="departmentId"
            >
            </p-dropdown>
          </div>
          <div
            class="col-md-6"
            *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
          >
            <p-dropdown
              [options]="userMaster"
              id="userIdForPieChart"
              [(ngModel)]="userIdForPieChart"
              optionLabel="firstName"
              (change)="PieChartData()"
              optionValue="id"
            ></p-dropdown>
          </div>
        </div>
        <p-chart
          type="doughnut"
          [data]="pieChartData"
          [options]="pieOptions"
        ></p-chart>
      </div>
    </div>

    <div class="container row my-2 text-center" *ngIf="IsMyTeam" hidden>
      <div
        class="col-4 text-start mx-4"
        *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
      >
        <div class="form-floating">
          <select
            name="assignedById"
            [(ngModel)]="departmentIdForPieChart"
            class="form-control role-select form-select"
            id="assignedById"
            placeholder="--Choose Option--"
            (change)="getAllAssignToUsers(departmentIdForPieChart)"
          >
            <option
              *ngFor="let project of deptMaster"
              [ngValue]="project.departmentId"
            >
              {{ project.departmentName }}
            </option>
          </select>
          <label for="assignedById">Department</label>
        </div>
      </div>
      <div
        class="col-4 text-start mx-3"
        *ngIf="userRole == 'Admin' || userRole == 'SuperAdmin'"
      >
        <div class="form-floating">
          <select
            name="userIdForPieChart"
            [(ngModel)]="userIdForPieChart"
            class="form-control role-select form-select"
            id="userIdForPieChart"
            placeholder="--Choose Option--"
            (change)="PieChartData()"
          >
            <option *ngFor="let project of userMaster" [ngValue]="project.id">
              {{ project.firstName }} {{ project.lastName }}
            </option>
          </select>
          <label for="userIdForPieChart">Employee</label>
        </div>
      </div>
    </div>
  </div>
</div>
